<!DOCTYPE html><html lang="en-US" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Frame Event Handler Termination" /><meta name="author" content="Mark Truluck" /><meta property="og:locale" content="en_US" /><meta name="description" content="Frame event handlers are terminated with two operators:" /><meta property="og:description" content="Frame event handlers are terminated with two operators:" /><link rel="canonical" href="/posts/return_vs_continue/" /><meta property="og:url" content="/posts/return_vs_continue/" /><meta property="og:site_name" content="Frame" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-03-12T16:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Frame Event Handler Termination" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Mark Truluck" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Mark Truluck"},"description":"Frame event handlers are terminated with two operators:","url":"/posts/return_vs_continue/","headline":"Frame Event Handler Termination","@type":"BlogPosting","dateModified":"2021-04-12T21:51:13+08:00","datePublished":"2021-03-12T16:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/return_vs_continue/"},"@context":"https://schema.org"}</script><title>Frame Event Handler Termination | Frame</title><link rel="icon" href="/assets/img/favicons/favicon.png" type="image/x-icon"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-VKPZ1VN8H2"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-VKPZ1VN8H2'); }); </script> <script async src="https://www.googletagmanager.com/gtag/js?id={"id"=>"G-VKPZ1VN8H2", "pv"=>{"enabled"=>false, "proxy_url"=>"", "proxy_endpoint"=>"", "cache"=>false}}"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', '{"id"=>"G-VKPZ1VN8H2", "pv"=>{"enabled"=>false, "proxy_url"=>"", "proxy_endpoint"=>"", "cache"=>false}}'); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div class="site-title mt-3"> <a href="/">Frame</a></div><div class="site-subtitle font-italic">A Software Architecture Language</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/resources/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>RESOURCES</span> </a><li class="nav-item"> <a href="/notation/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>FRAME NOTATION</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://www.linkedin.com/in/marktruluck/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['mark','frame-lang.org'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://github.com/frame-lang" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Frame Event Handler Termination</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Frame Event Handler Termination</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Mar 12, 2021, 4:00 PM +0800" > Mar 12, 2021 <i class="unloaded">2021-03-12T16:00:00+08:00</i> </span> by <span class="author"> Mark Truluck </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Apr 12, 2021, 6:51 AM -0700" > Apr 12, 2021 <i class="unloaded">2021-04-12T21:51:13+08:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="365 words">2 min</span></div></div><div class="post-content"><p>Frame event handlers are terminated with two operators:</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center">Operator<th style="text-align: center">Meaning<tbody><tr><td style="text-align: center">^<td style="text-align: center">return<tr><td style="text-align: center">:&gt;<td style="text-align: center">continue</table></div><p>Return is, by far, the most common of the two. Lining up the Frame notation with the C# code it generates we can see how they align:</p><div class="table-wrapper"><table><tr><th style="text-align:center;">Frame Notation<th style="text-align:center; ">C# code<tr><td style="vertical-align:top;"><pre>
$EventTerminators
    |return|
        ^

    |continue|
        :&gt;
</pre><td><pre align="left">
private void _sEventTerminators_(FrameEvent e) {
    if (e._message.Equals("return")) {
        return;
    }
    else if (e._message.Equals("continue")) {

    }
}
</pre></table></div><p>Note that the continue is, from a code generation standpoint, a no-op in that it doesn’t generate anything. This enables the execution to simply fall through to whatever code is below the tests for event handler messages.</p><p>This approach enables a simple way for a child state event handler to do something and then pass the event on for further processing by the parent state:</p><div class="table-wrapper"><table><tr><th style="text-align:center;">Frame Notation<th style="text-align:center; ">C# code<tr><td style="vertical-align:top;"><pre>
#ReturnVsContinue





    -interface-

    _return @(|return|)




    _continue @(|continue|)





    -machine-

    $Child =&gt; $Parent
        |return|
            log("saw return in $Child")
            ^

        |continue|  
            log("saw continue in $Child")
            :&gt;





    $Parent
        |return|
            log("saw return in $Parent")
            ^

        |continue|
            log("saw continue in $Parent")
            :&gt;



    -actions-

    log [msg:string]
##
</pre><td><pre align="left">
public partial class ReturnVsContinue {
    public ReturnVsContinue() {

        _state_ = _sChild_;
    }

    //===================== Interface Block ===================//

    public void _return() {
        FrameEvent e = new FrameEvent("return",null);
        _state_(e);
    }

    public void _continue() {
        FrameEvent e = new FrameEvent("continue",null);
        _state_(e);
    }


    //===================== Machine Block ===================//

    private void _sChild_(FrameEvent e) {
        if (e._message.Equals("return")) {
            log_do("saw return in $Child");
            return;
        }
        else if (e._message.Equals("continue")) {
            log_do("saw continue in $Child");

        }
        _sParent_(e);

    }

    private void _sParent_(FrameEvent e) {
        if (e._message.Equals("return")) {
            log_do("saw return in $Parent");
            return;
        }
        else if (e._message.Equals("continue")) {
            log_do("saw continue in $Parent");

        }
    }

    //===================== Actions Block ===================//

    protected virtual void log_do(string msg) {
        throw new NotImplementedException();
    }


    //=============== Machinery and Mechanisms ==============//

    private delegate void FrameState(FrameEvent e);
    private FrameState _state_;

}
</pre></table></div><p>As both <code class="language-plaintext highlighter-rouge">return</code> and <code class="language-plaintext highlighter-rouge">continue</code> are reserved words in many target languages, we expose the interface methods using a <code class="language-plaintext highlighter-rouge">_</code> prefix and use the alias notation to send the <code class="language-plaintext highlighter-rouge">|return|</code> and <code class="language-plaintext highlighter-rouge">|continue|</code> messages. This is a good example of how the alias feature comes in handy to accommodate target language interface requirements while maintaining standard or desirable messages internally to drive the state machine.</p><p>Here is the working demo for the spec:</p><iframe width="100%" height="475" src="https://dotnetfiddle.net/Widget/Qq69UX" frameborder="0"></iframe></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/language-basics/'>language-basics</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://www.linkedin.com/in/marktruluck/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/hello_worlds_part_3/">Hello Worlds - Part 3</a><li><a href="/posts/gotta_branch/">Gotta Branch</a><li><a href="/posts/history_of_states/">The History of States (there won't be a quiz) </a><li><a href="/posts/hello_worlds_part_1/">Hello Worlds - Part 1</a><li><a href="/posts/what_is_frame/">What is Frame?</a></ul></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/hello_worlds_part_2/"><div class="card-body"> <span class="timeago small" > Feb 13, 2021 <i class="unloaded">2021-02-13T16:00:01+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hello Worlds - Part 2</h3><div class="text-muted small"><p> Stateful machines In the last article we successfully had a Frame system say “Hello World”. In this one we will guild the lily a bit and explore some of the core Frame syntax for implementing basi...</p></div></div></a></div><div class="card"> <a href="/posts/hello_worlds_part_3/"><div class="card-body"> <span class="timeago small" > Feb 13, 2021 <i class="unloaded">2021-02-13T16:00:02+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hello Worlds - Part 3</h3><div class="text-muted small"><p> In the last installment of our conversation with the World, the denouement concludes with a demonstration of how to implement a key feature of Statecharts called hierarchical state machines and the...</p></div></div></a></div><div class="card"> <a href="/posts/gotta_branch/"><div class="card-body"> <span class="timeago small" > Feb 13, 2021 <i class="unloaded">2021-02-13T16:00:03+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Gotta Branch</h3><div class="text-muted small"><p> Overview of Frame Control Flow Mechanisms Frame is an evolving language and the current version (v0.3.23 at this instant) only supports branching syntax of various flavors. So at the moment you ca...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/beyond_uml/" class="btn btn-outline-primary" prompt="Older"><p>Beyond UML</p></a> <a href="/posts/frame_behaviors/" class="btn btn-outline-primary" prompt="Newer"><p>System Behavior Notation in Frame</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/username">Mark Truluck</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
